---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
const allArticles = await getCollection("articles");
const sortedArticles = allArticles.sort((a, b) => {
  return b.slug.localeCompare(a.slug);
});
---

<BaseLayout title="科学技術コミュ日記">
  <main class="max-w-lg m-auto">
    <div class="flex flex-col gap-y-3">
      {
        sortedArticles.map((article) => (
          <a href={`/${article.slug}`}>
            <div class="flex flex-col gap-y-1 rounded p-3 hover:bg-neutral-2/70">
              <div class="flex justify-between gap-x-6 items-start">
                <div>{article.data.title}</div>
                <div class="shrink-0 opacity-75 tracking-tighter">
                  <time datetime={article.data.pubDate.toISOString()}>
                    {article.data.pubDate.toISOString().slice(0, 10)}
                  </time>
                </div>
              </div>
              <div class="text-xs tracking-tight">
                {article.data.description}
              </div>
            </div>
          </a>
        ))
      }
    </div>
  </main>
</BaseLayout>
